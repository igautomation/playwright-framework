# Report History Guide

This guide explains how to use the report history feature in the Playwright framework.

## Overview

The report history feature allows you to track, search, and manage reports generated by the scheduled reports system. This is useful for:

- Viewing past reports
- Tracking report generation over time
- Organizing reports with tags
- Searching for specific reports
- Analyzing reporting patterns

## Accessing Report History

You can access the report history through the dashboard:

1. Start the dashboard: `dashboard`
2. Navigate to the "History" section in the sidebar
3. Browse and search through your report history

## Report History Dashboard

The report history dashboard provides several features:

### Filtering and Searching

You can filter and search reports by:

- **Search Term**: Search report titles and schedule names
- **Schedule**: Filter by specific schedule
- **Tags**: Filter by report tags
- **Date Range**: Filter by date range (today, yesterday, this week, this month, or custom range)

### Report Actions

For each report, you can:

- **View**: Open the report in a new tab
- **Details**: View detailed information about the report
- **Delete**: Remove the report from history (optionally delete the report files as well)

### Report Details

The report details modal shows:

- Report title
- Schedule name
- Generation date
- Report path
- Tags

You can also:
- Add new tags
- Remove existing tags
- Delete the report
- Open the report

### Statistics

The report history dashboard includes statistics:

- **Reports by Schedule**: Pie chart showing the distribution of reports by schedule
- **Reports by Month**: Bar chart showing the number of reports generated each month

## Tags

Tags help you organize and categorize reports. The system automatically adds some tags:

- `scheduled`: Added to reports generated on schedule
- `manual-run`: Added to reports generated manually

You can add your own custom tags to reports for better organization.

## Command Line Interface

You can also manage report history through the command line:

### List Reports

```bash
node src/cli/history.js list
```

### View Report Details

```bash
node src/cli/history.js show --id report-123
```

### Add Tags

```bash
node src/cli/history.js tag --id report-123 --tags "important,review"
```

### Remove Tags

```bash
node src/cli/history.js untag --id report-123 --tags "review"
```

### Delete Report

```bash
node src/cli/history.js delete --id report-123
```

### Clean Up Old Reports

```bash
node src/cli/history.js cleanup --days 30
```

## Programmatic API

You can also use the ReportHistory class in your code:

```javascript
const { ReportHistory } = require('../utils/scheduler');

// Initialize report history
const reportHistory = new ReportHistory();

// Add a report to history
const reportId = reportHistory.addReport({
  title: 'My Report',
  path: 'path/to/report',
  scheduleId: 'schedule-123',
  scheduleName: 'Daily Report',
  tags: ['important']
});

// Get reports
const reports = reportHistory.getReports({
  search: 'Daily',
  limit: 10,
  offset: 0
});

// Get a specific report
const report = reportHistory.getReport(reportId);

// Add tags
reportHistory.addTags(reportId, ['reviewed', 'approved']);

// Remove tags
reportHistory.removeTags(reportId, ['reviewed']);

// Delete a report
reportHistory.deleteReport(reportId, true); // true to also delete the report file

// Clean up old reports
reportHistory.cleanupOldReports(30); // Delete reports older than 30 days
```

## Best Practices

1. **Use tags** to organize reports by purpose, status, or content
2. **Clean up old reports** periodically to save disk space
3. **Search effectively** using the filtering options
4. **Review statistics** to understand reporting patterns
5. **Add meaningful tags** when generating important reports

## Integration with Scheduled Reports

The report history feature is automatically integrated with the scheduled reports system:

1. When a report is generated on schedule, it's added to history with the `scheduled` tag
2. When a report is generated manually, it's added to history with the `manual-run` tag
3. Reports can be viewed and managed from the history dashboard

This integration provides a complete audit trail of all generated reports.